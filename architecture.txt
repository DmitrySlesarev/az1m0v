az1m0v/ (EV Management System)
├── README.md
├── LICENSE
├── main.py                         # Entry point for EV system:
│                                  #   - Initializes all components (BMS, motor, charging, vehicle controller)
│                                  #   - Initializes sensors (IMU, temperature sensors)
│                                  #   - Initializes autopilot (if enabled)
│                                  #   - Starts dashboard automatically (if enabled)
│                                  #   - Main update loop feeds data to dashboard
│                                  #   - Handles graceful shutdown
├── pyproject.toml                  # Poetry dependencies
├── poetry.lock                      # Locked dependencies
├── verify_tests.sh                  # Test verification script
├── architecture.txt                 # This file
├── architecture.drawio              # Visual architecture diagram (draw.io)
├── .github/
│   └── workflows/
│       └── python-package.yml       # CI/CD workflow (runs tests on every commit)
├── docs/
│   ├── README.md
│   └── configuration.md
├── config/
│   ├── __init__.py
│   ├── config.json                  # System configuration
│   ├── config_schema.json           # JSON schema for validation
│   └── settings.py                  # Configuration loader
├── core/
│   ├── __init__.py
│   ├── battery_management.py        # Battery Management System (BMS):
│   │                                #   - Cell group temperature integration
│   │                                #   - Coolant temperature monitoring
│   ├── motor_controller.py          # VESC motor controller integration:
│   │                                #   - Stator temperature monitoring
│   ├── charging_system.py           # Charging system management:
│   │                                #   - Port/connector temperature monitoring
│   │                                #   - Overtemperature safety shutdown
│   └── vehicle_controller.py        # High-level vehicle coordination:
│                                      #   - State management (PARKED, READY, DRIVING, CHARGING, etc.)
│                                      #   - Safety enforcement (prevents driving while charging)
│                                      #   - Drive mode control (ECO, NORMAL, SPORT, REVERSE)
│                                      #   - Range calculation and energy tracking
│                                      #   - Coordinates BMS, motor, and charging systems
├── sensors/
│   ├── __init__.py
│   ├── imu.py                       # Inertial Measurement Unit (MPU-6050/MPU-9250):
│   │                                #   - 6-DOF (MPU-6050) or 9-DOF (MPU-9250) support
│   │                                #   - I2C communication
│   │                                #   - Configurable sampling rates
│   │                                #   - Calibration support
│   │                                #   - Simulation mode
│   ├── gps.py                       # GPS positioning
│   ├── temperature.py               # Comprehensive temperature sensor system:
│   │                                #   - Battery cell group sensors (one per series group)
│   │                                #   - Coolant inlet/outlet sensors
│   │                                #   - Motor stator winding sensors (per phase)
│   │                                #   - Charging port/connector sensors
│   │                                #   - Configurable thresholds and fault detection
│   │                                #   - CAN bus integration
│   └── computer_vision.py           # Camera/vision processing
├── communication/
│   ├── __init__.py
│   ├── can_bus.py                   # CAN bus interface and EV protocol:
│   │                                #   - VESC protocol support
│   │                                #   - Temperature sensor protocol (CAN IDs 0x400-0x406)
│   │                                #   - Battery, motor, charging status messages
│   │                                #   - ISO 11898 compliant
│   └── telemetry.py                 # Telemetry data transmission (Quectel integration):
│                                      #   - Remote data streaming
│                                      #   - GPS location tracking
│                                      #   - Error reporting
│                                      #   - Cellular communication
├── ui/
│   ├── __init__.py
│   ├── dashboard.py                 # Web-based dashboard with Flask + WebSocket:
│   │                                #   - Real-time data visualization
│   │                                #   - CAN bus integration
│   │                                #   - WebSocket for live updates
│   │                                #   - REST API endpoint
│   │                                #   - Control commands (accelerate, brake, drive modes, charging, autopilot)
│   │                                #   - Vehicle state control
│   │                                #   - Raspberry Pi 4 optimized
│   │                                #   - Integrated with main.py for automatic startup
│   ├── templates/
│   │   └── dashboard.html           # Dashboard HTML template with responsive design
│   └── mobile_app.py                # Mobile application interface
├── ai/
│   ├── __init__.py
│   └── autopilot.py                  # Autonomous driving AI
├── utils/
│   ├── __init__.py
│   ├── helpers.py                   # Utility functions
│   └── count_lines.py               # Code statistics
├── tests/
│   ├── __init__.py
│   ├── conftest.py                  # Pytest configuration
│   ├── unit/
│   │   ├── __init__.py
│   │   ├── conftest.py
│   │   ├── test_autopilot.py
│   │   ├── test_battery_management.py
│   │   ├── test_can_bus.py
│   │   ├── test_computer_vision.py
│   │   ├── test_config.py
│   │   ├── test_core.py
│   │   ├── test_motor_controller.py
│   │   ├── test_charging_system.py
│   │   ├── test_vehicle_controller.py
│   │   ├── test_telemetry.py
│   │   ├── test_temperature.py     # Temperature sensor unit tests
│   │   ├── test_main.py            # Unit tests for main.py EVSystem
│   │   ├── test_dashboard.py       # Unit tests for dashboard (including control commands)
│   │   └── test_ui_main.py         # Unit tests for ui/__main__.py
│   └── functional/
│       ├── __init__.py
│       ├── test_autopilot_integration.py
│       ├── test_can_bus_integration.py
│       ├── test_motor_controller_integration.py
│       ├── test_charging_system_integration.py
│       ├── test_vehicle_controller_integration.py
│       ├── test_telemetry_integration.py
│       ├── test_temperature_integration.py  # Temperature sensor integration tests
│       └── test_main_integration.py         # Integration tests for main.py EVSystem
└── scripts/
    ├── setup.sh                     # Setup script
    └── integration/
        ├── __init__.py
        ├── simpbms_builder.py       # SimpBMS firmware build and integration
        ├── vesc_builder.py          # VESC motor controller build and integration
        ├── quectel_builder.py       # Quectel QuecPython library build and integration
        └── mpu_builder.py           # MPU-6050/MPU-9250 IMU library build and integration